<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Customer Registration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, blue, pink);
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: white;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            padding: 50px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: black;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-group input[type="radio"],
        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        .form-actions {
            text-align: center;
        }

        .form-actions button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }

        .form-actions button.cancel {
            background-color: #f44336;
        }

        .form-actions button.delete {
            background-color: #ff9800;
        }

        .form-actions button:hover {
            opacity: 0.9;
        }

        .error {
            color: red;
            margin-top: 5px;
        }
    </style>
</head>

<body>
    <h1>Delete Customer</h1>
    <div class="container">
        <form id="registrationForm">
            <div class="form-group">
                <label for="ssn">Customer SSN Id:</label>
                <input type="text" id="ssn" name="ssn"  readonly>
            </div>
            <div class="form-group">
                <label for="name">Customer Name:</label>
                <input type="text" id="name" name="name" placeholder="Enter your Name" required readonly>
            </div>
            <div class="form-group">
                <label for="accountNumber">Account Number:</label>
                <input type="text" id="accountNumber" name="accountNumber" placeholder="Enter your Account number" required readonly>
                <div class="error" id="accountNumberError"></div>
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth:</label>
                <input type="date" id="dob" name="dob" required readonly>
            </div>
            <div class="form-group">
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required disabled>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="maritalStatus">Marital Status:</label>
                <select id="maritalStatus" name="maritalStatus" required disabled>
                    <option value="single">Single</option>
                    <option value="married">Married</option>
                    <option value="divorced">Divorced</option>
                    <option value="widowed">Widowed</option>
                </select>
            </div>
            <div class="form-group">
                <label for="contactNumber">Contact Number:</label>
                <input type="tel" id="contactNumber" name="contactNumber" pattern="[0-9]{10}" required readonly>
            </div>
            <div class="form-group">
                <label for="email">Email Address:</label>
                <input type="email" id="email" name="email" placeholder="abc@mail.com" required readonly>
            </div>
            <div class="form-group">
                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required readonly>
            </div>
            <div class="form-group">
                <label for="ifsc">IFSC Code:</label>
                <input type="text" id="ifsc" name="ifsc" required readonly>
                <div class="error" id="ifscError"></div>
            </div>
            <div class="form-group">
                <label for="balance">Account Balance:</label>
                <input type="number" id="balance" name="balance" required readonly>
            </div>
            <div class="form-group">
                <label for="adhaar">Adhaar Card Number:</label>
                <input type="text" id="adhaar" name="adhaar" pattern="[0-9]{12}" placeholder="Enter your 12 digit aadhar number" required readonly>
            </div>
            <div class="form-group">
                <label for="pan">PAN Card Number:</label>
                <input type="text" id="pan" name="pan" required readonly>
                <div class="error" id="panError"></div>
            </div>
            <div class="form-actions">
                <button type="button" class="delete" id="delete">Delete</button>
                <button type="button" class="cancel" id="cancel">Cancel</button>
            </div>
        </form>
    </div>

    <script>
        let ssnForCompare = prompt("Please Customer ssn", "0");
        let flag = 0;

        const customerData = localStorage.getItem("customers");
        const customerObj = JSON.parse(customerData);

        for (let i = 0; i < customerObj.length; i++) {
            if (customerObj[i].ssn == ssnForCompare) {
                flag = 1;
                index = i;
                break;
            }
        }

        if (!flag) {
            alert("SSN Not found Either Wrong SSN or Cutsomer doesn't Exists");


            let deleteButton = document.getElementById('delete')
            deleteButton.disabled = true;
        }
        else {

            console.log(customerObj[index])
            let name = document.getElementById('name').value = customerObj[index].name;
            let accountNumber = document.getElementById('accountNumber').value = customerObj[index].accountNumber;
            let dob = document.getElementById('dob').value = customerObj[index].dob;
            let gender = document.getElementById('gender').value = customerObj[index].gender;
            let maritalStatus = document.getElementById('maritalStatus').value = customerObj[index].maritalStatus;
            let contactNumber = document.getElementById('contactNumber').value = customerObj[index].contactNumber;
            let email = document.getElementById('email').value = customerObj[index].email;
            let address = document.getElementById('address').value = customerObj[index].address;
            let ifsc = document.getElementById('ifsc').value = customerObj[index].ifsc;
            let balance = document.getElementById('balance').value = customerObj[index].balance;
            let adhaar = document.getElementById('adhaar').value = customerObj[index].balance;
            let pan = document.getElementById('pan').value = customerObj[index].pan;

            let ssn = document.getElementById('ssn').value = ssnForCompare;









        }

        document.getElementById('delete').addEventListener('click',function (){

            let customers = JSON.parse(localStorage.getItem("customers"));


            if (customers) {
                // Filter out the customer with the matching ssn
                customers = customers.filter(cust => cust.ssn !== ssnForCompare);

                console.log(customers);
        
                // Update localStorage only if there are remaining customers
                if (customers.length > 0) {
                    localStorage.setItem("customers", JSON.stringify(customers));
                    alert(`Customer with SSN ID ${ssnForCompare} was deleted successfully`)
                } else {
                    // Remove the "customers" key if no customers are left
                    localStorage.removeItem("customers");
                }
            }
        })


        document.getElementById('cancel').addEventListener('click', function () {
            window.history.back();
            console.log("Cancel button pressed")
        })



    </script>
</body>

</html>